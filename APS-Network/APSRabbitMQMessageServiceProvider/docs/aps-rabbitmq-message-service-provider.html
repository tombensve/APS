<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="generated-by" content="MarkdownDoc"/>
    <link href="docs.css" type="text/css" rel="stylesheet"/>
  </head>
  <body>
    <H1>APS RabbitMQ Message Service Provider</H1>
    <p>
      This service provides an implementation of APSMessageService using <a href='http://www.rabbitmq.com/' title=''>RabbitMQ</a>.      
    </p>
    <p>
      <strong>Note:</strong> This implementation does not support <em>contentType</em> in the API. When sending messages the <em>contentType</em> will be ignored, and when messages are received the <em>contentType</em> will always be "UNKNOWN".      
    </p>
    <p>
      A good suggestion is to always use JSON or XML as content.      
    </p>
    <H2>APSMessageService API</H2>
    <p>
      <a href='http://apidoc.natusoft.se/APS/se/natusoft/osgi/aps/api/net/messaging/service/APSMessageService.html' title=''>Javadoc</a>      
    </p>
    <p>
      public <em>interface</em> <strong>APSSimpleClusterService </strong>   [se.natusoft.osgi.aps.api.net.messaging.service] {      
    </p>
    <p>
      This service defines a synchronized cluster.      
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>void clusterUpdated(String clusterName, String name, TypedData data)</strong>      
    </p>
    <p>
      Receives an updated value.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of the cluster the updated data belongs to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>name</em> - The name of the updated data.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>data</em> - The updated data.         
      </p>
    </blockquote>
    <p>
      <strong>void provideData(String clusterName, String name, TypedData typedData)</strong>      
    </p>
    <p>
      Creates/updates a value in a cluster.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of a cluster to store in.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>name</em> - The name of the value to store.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>typedData</em> - The value to store.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IllegalArgumentException</em> - on any problem with clusterName.         
      </p>
    </blockquote>
    <p>
      <strong>TypedData retrieveData(String clusterName, String name)</strong>      
    </p>
    <p>
      Gets a value stored in a named cluster. Returns null if it does not exists.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of the cluster to get data from.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>name</em> - The name of the cluster data to get.         
      </p>
    </blockquote>
    <p>
      <strong>void addUpdateListener(String clusterName, UpdateListener updateListener)</strong>      
    </p>
    <p>
      Adds an update listener.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of the cluster to listen for changes in.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>updateListener</em> - The update listener to add.         
      </p>
    </blockquote>
    <p>
      <strong>void removeUpdateListener(String clusterName, UpdateListener updateListener)</strong>      
    </p>
    <p>
      Removes an update listener.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of the cluster to remove update listener from.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>updateListener</em> - The listener to remove.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
      <strong>Map&lt;String, List&lt;UpdateListener&gt;&gt; listeners = Collections.synchronizedMap(new HashMap&lt;&gt;())</strong>      
    </p>
    <p>
       The listeners.      
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>protected void updateListeners(String clusterName, String name, TypedData data)</strong>      
    </p>
    <p>
      Updates all listeners.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of the cluster the updated data belongs to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>name</em> - The name of the updated data.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>data</em> - The actual data.         
      </p>
    </blockquote>
    <p>
      <strong>protected List&lt;UpdateListener&gt; getListeners(String clusterName)</strong>      
    </p>
    <p>
      Returns the listeners.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>clusterName</em> - The name of the cluster to get listeners for.         
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>interface</em> <strong>APSSimpleMessageService </strong>   [se.natusoft.osgi.aps.api.net.messaging.service] {      
    </p>
    <p>
      This defines a simple message service. Can be implemented by using a message bus like RabbitMQ, Active MQ, etc or just a simple tcpip server or whatever.      
    </p>
    <p>
      Since the actual members are outside of this service API, it doesn't really know who they are and doesn't care, all members are defined by configuration.      
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>void messageReceived(String topic, TypedData message)</strong>      
    </p>
    <p>
      This is called when a message is received.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>topic</em> - The topic the message belongs to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>message</em> - The received message.         
      </p>
    </blockquote>
    <p>
      <strong>void addMessageListener(String topic, MessageListener listener)</strong>      
    </p>
    <p>
      Adds a listener for types.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>topic</em> - The topic to listen to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>listener</em> - The listener to add.         
      </p>
    </blockquote>
    <p>
      <strong>void removeMessageListener(String topic, MessageListener listener)</strong>      
    </p>
    <p>
      Removes a messaging listener.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>topic</em> - The topic to stop listening to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>listener</em> - The listener to remove.         
      </p>
    </blockquote>
    <p>
      <strong>void sendMessage(String topic, TypedData message) throws APSMessagingException</strong>      
    </p>
    <p>
      Sends a message.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>topic</em> - The topic of the message.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>message</em> - The message to send.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>APSMessagingException</em> - on failure.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>protected void sendToListeners(String topic, TypedData message)</strong>      
    </p>
    <p>
      Sends a message to the registered listeners.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The message to send.         
      </p>
    </blockquote>
    <p>
      <strong>protected List&lt;MessageListener&gt; lookupMessageListeners(String topic)</strong>      
    </p>
    <p>
      Returns the message listeners for a topic.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>topic</em> - The topic to get listeners for.         
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
  </body>
</html>
