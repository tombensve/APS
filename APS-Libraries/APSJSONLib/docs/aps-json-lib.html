<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="generated-by" content="MarkdownDoc"/>
    <link href="docs.css" type="text/css" rel="stylesheet"/>
  </head>
  <body>
    <H1>APSJSONLib</H1>
    <p>
      This is a library (exports all its packages and provides no service) for reading and writing JSON. It can also write a JavaBean object as JSON and take a JSON value or inputstream containing JSON and produce a JavaBean.      
    </p>
    <p>
      This basically provides a class representing each JSON type: JSONObject, JSONString, JSONNumber, JSONBoolean, JSONArray, JSONNull, and a JSONValue class that is the common base class for all the other. Each class knows how to read and write the JSON type it represents. Then there is a JavaToJSON and a JSONToJava class with static methods for converting back and forth. This mapping is very primitive. There has to be one to one between the JSON and the Java objects.      
    </p>
    <H2>Changes</H2>
    <H3>0.10.0</H3>
    <p>
      <em>readJSON(...)</em> in the <strong>JSONValue</strong> base class now throws JSONEOFException (extends IOException) on EOF. The reason for this is that internally it reads characters which cannot return -1 or any non JSON data valid char to represent EOF. Yes, it would be possible to replace <em>char</em> with <em>Character</em>, but that will have a greater effect on existing code using this lib. If an JSONEOFException comes and is not handled it is still very much more clear what happened than a NullPointerException would be!      
    </p>
    <H2>APIs</H2>
    <p>
      Complete javadocs can be found at <a href='http://apidoc.natusoft.se/APSJSONLib/' title=''>http://apidoc.natusoft.se/APSJSONLib/</a>.      
    </p>
    <p>
      public <em>class</em> <strong>JSON </strong>   [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This is the official API for reading and writing JSON values.      
    </p>
    <p>
      <strong>public static JSONValue read(InputStream jsonIn, JSONErrorHandler errorHandler) throws IOException</strong>      
    </p>
    <p>
      Reads any JSON object from the specified <em>InputStream</em>.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A JSONValue subclass. Which depends on what was found on the stream.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>jsonIn</em> - The InputStream to read from.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>errorHandler</em> - An implementation of this interface should be supplied by the user to handle any errors during JSON parsing.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on any IO failures.         
      </p>
    </blockquote>
    <p>
      <strong>public static void write(OutputStream jsonOut, JSONValue value) throws IOException</strong>      
    </p>
    <p>
      Writes a <em>JSONValue</em> to an <em>OutputStream</em>. This will write compact output by default.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>jsonOut</em> - The OutputStream to write to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>value</em> - The value to write.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on failure.         
      </p>
    </blockquote>
    <p>
      <strong>public static void write(OutputStream jsonOut, JSONValue value, boolean compact) throws IOException</strong>      
    </p>
    <p>
      Writes a <em>JSONValue</em> to an <em>OutputStream</em>.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>jsonOut</em> - The OutputStream to write to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>value</em> - The value to write.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>compact</em> - If true the written JSON is made very compact and hard to read but produce less data.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONArray </strong> extends  JSONValue  [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on http://www.json.org/.      
    </p>
    <p>
      This represents the "array" diagram on the above mentioned web page:      
    </p>
    <pre>
      <code>
                  _______________________
                 /                       \
                 |                       |
    |_____ ([) __/_______ (value) _______\__ (]) _____|
    |              /                   \              |
                   |                   |
                   \_______ (,) _______/
      </code>
    </pre>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
            
    </p>
    <p>
      <strong>public JSONArray()</strong>      
    </p>
    <p>
      Creates a new JSONArray for wrinting JSON output.      
    </p>
    <p>
      <strong>public JSONArray(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONArray for reading JSON input and writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>errorHandler</em>        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>public void addValue(JSONValue value)</strong>      
    </p>
    <p>
      Adds a value to the array.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>value</em> - The value to add.         
      </p>
    </blockquote>
    <p>
      <strong>public List&lt;JSONValue&gt; getAsList()</strong>      
    </p>
    <p>
      Returns the array values as a List.      
    </p>
    <p>
      <strong>public &lt;T extends JSONValue&gt; List&lt;T&gt; getAsList(Class&lt;T&gt; type)</strong>      
    </p>
    <p>
      Returns the array values as a list of a specific type.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A list of specified type if type is the same as in the list.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>type</em> - The class of the type to return values as a list of.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>&lt;T&gt;</em> - One of the JSONValue subclasses.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONBoolean </strong> extends  JSONValue    [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on <a href='http://www.json.org/' title=''>http://www.json.org/</a>.      
    </p>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
            
    </p>
    <p>
      <strong>public JSONBoolean(boolean value)</strong>      
    </p>
    <p>
      Creates a new JSONBoolean instance for writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>value</em> - The value for this boolean.         
      </p>
    </blockquote>
    <p>
      <strong>public JSONBoolean(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONBoolean instance for reading JSON input or writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>errorHandler</em>        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
      <strong>public void setBooleanValue(boolean value)</strong>      
    </p>
    <p>
      Sets the value of this boolean.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>value</em> - The value to set.         
      </p>
    </blockquote>
    <p>
      <strong>public boolean getAsBoolean()</strong>      
    </p>
    <p>
      Returns the value of this boolean.      
    </p>
    <p>
      <strong>public String toString()</strong>      
    </p>
    <p>
      Returns the value of this boolean as a String.      
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONEOFException </strong> extends  IOException  }  [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      Thrown if a JSON structure is tried to be read from a stream that has no more data.      
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>interface</em> <strong>JSONErrorHandler </strong>   [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This is called on warnings or failures.      
    </p>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
      <strong>void warning(String message)</strong>      
    </p>
    <p>
      Warns about something.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The warning message.         
      </p>
    </blockquote>
    <p>
      <strong>void fail(String message, Throwable cause) throws RuntimeException</strong>      
    </p>
    <p>
      Indicate failure.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The failure message.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>cause</em> - The cause of the failure. Can be null!         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>RuntimeException</em> - This method must throw a RuntimeException.         
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONNull </strong> extends  JSONValue    [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on <a href='http://www.json.org/' title=''>http://www.json.org/</a>.      
    </p>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
      <strong>public JSONNull()</strong>      
    </p>
    <p>
      Creates a new JSONNull instance for writing JSON output.      
    </p>
    <p>
      <strong>public JSONNull(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONNull instance for reading JSON input or writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>errorHandler</em>        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
      <strong>public String toString()</strong>      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        as String.        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONNumber </strong> extends  JSONValue    [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on http://www.json.org/.      
    </p>
    <p>
      This represents the "number" diagram on the above mentioned web page:      
    </p>
    <pre>
      <code>
                                          ______________________
                                         /                      \
                                         |                      |
    |_|______________ (0) _______________/__ (.) ___ (digit) ___\_________________________|_|
    | | \       /  \                    /         /           \  \                      / | |
        |       |  |                   /          \___________/  |                      |
        \_ (-) _/  \_ (digit 1-9) ____/_______                   |                      |
                                   /          \                  |                      |
                                   \_ (digit) /           _ (e) _|                      |
                                                         |_ (E) _|           ___________|
                                                         |        _ (+) _   /           |
                                                         \_______/_______\__\_ (digit) _/
                                                                 \_ (-) _/
      </code>
    </pre>
    <p>
      @author Tommy Svesson      
    </p>
    <p>
            
    </p>
    <p>
      <strong>public JSONNumber(Number value)</strong>      
    </p>
    <p>
      Creates a new JSONNumber instance for writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>value</em> - The numeric value.         
      </p>
    </blockquote>
    <p>
      <strong>public JSONNumber(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONNumber instance for reading JSON input or writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>errorHandler</em> - The error handle to use.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
      <strong>public Number toNumber()</strong>      
    </p>
    <p>
      Returns the number as a Number.      
    </p>
    <p>
      <strong>public double toDouble()</strong>      
    </p>
    <p>
      Returns the number as a double value.      
    </p>
    <p>
      <strong>public float toFloat()</strong>      
    </p>
    <p>
      Returns the number as a float value.      
    </p>
    <p>
      <strong>public int toInt()</strong>      
    </p>
    <p>
      Returns the number as an int value.      
    </p>
    <p>
      <strong>public long toLong()</strong>      
    </p>
    <p>
      Returns the number as a long value.      
    </p>
    <p>
      <strong>public short toShort()</strong>      
    </p>
    <p>
      Returns the number as a short value.      
    </p>
    <p>
      <strong>public byte toByte()</strong>      
    </p>
    <p>
      Returns the number as a byte value.      
    </p>
    <p>
      <strong>public String toString()</strong>      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        number as String.        
      </p>
    </blockquote>
    <p>
      <strong>public Object to(Class type)</strong>      
    </p>
    <p>
      Returns the number as a value of the type specified by the type parameter.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>type</em> - The type of the returned number.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONObject </strong> extends  JSONValue    [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on http://www.json.org/.      
    </p>
    <p>
      It represents the "object" diagram on the above mentioned web page:      
    </p>
    <pre>
      <code>
                 ________________________________________
                /                                        \
    |___ ({) __/_____ (string) ____ (:) ____ (value) _____\___ (}) ____|
    |           /                                        \             |
                \__________________ (,) _________________/
      </code>
    </pre>
    <p>
      This is also the starting point.      
    </p>
    <p>
      To write JSON, create a new <em>JSONObject</em> (<code>new JSONObject()</code>) and call <code>addProperty(name</code>,<code> value)</code> for children. Then do jsonObj.writeJSON(outputStream)<code>.</code>      
    </p>
    <p>
      To read JSON, create a new <em>JSONObject</em> (<code>new JSONObject(jsonErrorHandler)</code>) and then do <code>jsonObj.readJSON(inputStream)</code>. Then use <code>getProperty(name)</code> to extract children.      
    </p>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
            
    </p>
    <p>
      <strong>public JSONObject()</strong>      
    </p>
    <p>
      Creates a JSONObject instance for writing JSON output.      
    </p>
    <p>
      <strong>public JSONObject(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONObject instance for reading JSON input or writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>errorHandler</em>        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>public Set&lt;JSONString&gt; getPropertyNames()</strong>      
    </p>
    <p>
      Returns the names of the available properties.      
    </p>
    <p>
      <strong>public JSONValue getProperty(JSONString name)</strong>      
    </p>
    <p>
      Returns the named property.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>name</em> - The name of the property to get.         
      </p>
    </blockquote>
    <p>
      <strong>public JSONValue getProperty(String name)</strong>      
    </p>
    <p>
      Returns the named property.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>name</em> - The name of the property to get.         
      </p>
    </blockquote>
    <p>
      <strong>public void addProperty(JSONString name, JSONValue value)</strong>      
    </p>
    <p>
      Adds a property to this JSONObject instance.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>name</em> - The name of the property.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>value</em> - The property value.         
      </p>
    </blockquote>
    <p>
      <strong>public void addProperty(String name, JSONValue value)</strong>      
    </p>
    <p>
      Adds a property to this JSONObject instance.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>name</em> - The name of the property.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>value</em> - The property value.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONString </strong> extends  JSONValue    [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on http://www.json.org/.      
    </p>
    <p>
      This represents the "string" diagram on the above mentioned web page:      
    </p>
    <pre>
      <code>
               ___________________________________________________________
              /    ____________________________________________________   \
              |   /                                                    \  |
    |___ (") _|___|___ (*1)                                        ____|__|_ (") ___|
    |           \                                                   /               |
                 |                                                  |
                 \__ (\) ___ (") (quotation mark) __________________|
                         |__ (\) (reverse solidus) _________________|
                         |__ (/) (solidus) _________________________|
                         |__ (b) (backspace) _______________________|
                         |__ (f) (formfeed) ________________________|
                         |__ (n) (newline) _________________________|
                         |__ (r) (carriage return) _________________|
                         |__ (t) (orizontal tab) ___________________|
                         \__ (u) (4 hexadecimal digits) ____________/
    
    *1: Any UNICODE character except " or \ or control character
      </code>
    </pre>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
            
    </p>
    <p>
      <strong>public JSONString(String value)</strong>      
    </p>
    <p>
      Creates a new JSONString for writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>value</em> - The value of this JSONString.         
      </p>
    </blockquote>
    <p>
      <strong>public JSONString(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONString for reading JSON input and writing JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>errorHandler</em>        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>abstract</em> <em>class</em> <strong>JSONValue </strong>   [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      This class is based on the structure defined on http://www.json.org/.      
    </p>
    <p>
      This is a base class for all other JSON* classes. It represents the "value" diagram on the above mentioned web page:      
    </p>
    <pre>
      <code>
                                                      Subclasses
                                                      ----------
    |________________ (STRING) ________________|      JSONString
    |  |_____________ (NUMBER) _____________|  |      JSONNumber
       |_____________ (OBJECT) _____________|         JSONObject
       |_____________ (ARRAY)  _____________|         JSONArray
       |_____________ (true)   _____________|     \__ JSONBoolean
       |_____________ (false)  _____________|     /
       \_____________ (null)   _____________/         JSONNull
      </code>
    </pre>
    <p>
      @author Tommy Svensson      
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>protected JSONValue()</strong>      
    </p>
    <p>
      Creates a new JSONValue.      
    </p>
    <p>
      <strong>protected JSONValue(JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONValue      
    </p>
    <p>
      <strong>protected abstract void readJSON(char c, JSONReader reader) throws IOException</strong>      
    </p>
    <p>
      This will read the vale from an input stream.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        the last character read.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>c</em> - The first character already read from the input stream.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>reader</em> - The reader to read from.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failure.         
      </p>
    </blockquote>
    <p>
      <strong>protected abstract void writeJSON(JSONWriter writer, boolean compact) throws IOException</strong>      
    </p>
    <p>
      This will write the data held by this JSON value in JSON format on the specified stream.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>writer</em> - A JSONWriter instance to write with.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>compact</em> - If true write the JSON as compact as possible. false means readable, indented.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - On IO failure.         
      </p>
    </blockquote>
    <p>
      <strong>protected JSONErrorHandler getErrorHandler()</strong>      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        The user supplied error handler.        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>protected void warn(String message)</strong>      
    </p>
    <p>
      Provide a warning.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The warning message.         
      </p>
    </blockquote>
    <p>
      <strong>protected void fail(String message, Throwable cause)</strong>      
    </p>
    <p>
      Fails the job.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The failure message.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>cause</em> - An eventual cause of the failure. Can be null.         
      </p>
    </blockquote>
    <p>
      <strong>protected void fail(String message)</strong>      
    </p>
    <p>
      Fails the job.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The failure message.         
      </p>
    </blockquote>
    <p>
      <strong>public void readJSON(InputStream is) throws IOException</strong>      
    </p>
    <p>
      This will read the value from an input stream.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>is</em> - The input stream to read from.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failure.         
      </p>
    </blockquote>
    <p>
      <strong>public void writeJSON(OutputStream os) throws IOException</strong>      
    </p>
    <p>
      This writes JSON to the specified OutputStream.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>os</em> - The outoutStream to write to.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failure.         
      </p>
    </blockquote>
    <p>
      <strong>public void writeJSON(OutputStream os, boolean compact) throws IOException</strong>      
    </p>
    <p>
      This writes JSON to the specified OutputStream.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>os</em> - The outoutStream to write to.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>compact</em> - If true write JSON as compact as possible. If false write it readable with indents.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failure.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      <strong>protected JSONReader(PushbackReader reader, JSONErrorHandler errorHandler)</strong>      
    </p>
    <p>
      Creates a new JSONReader instance.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>reader</em> - The PushbackReader to read from.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>errorHandler</em> - The handler for errors.         
      </p>
    </blockquote>
    <p>
      <strong>protected char getChar() throws IOException</strong>      
    </p>
    <p>
      Returns the next character on the specified input stream, setting EOF state checkable with isEOF().      
    </p>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO problems.         
      </p>
    </blockquote>
    <p>
      <strong>protected char getChar(boolean handleEscapes) throws IOException</strong>      
    </p>
    <p>
      Returns the next character on the specified input stream, setting EOF state checkable with isEOF().      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>handleEscapes</em> - If true then \* escape character are handled.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO problems.         
      </p>
    </blockquote>
    <p>
      <strong>protected void ungetChar(char c) throws IOException</strong>      
    </p>
    <p>
      Unreads the specified character so that the next call to getNextChar() will return it again.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>c</em> - The character to unget.         
      </p>
    </blockquote>
    <p>
      <strong>protected char skipWhitespace(char c) throws IOException</strong>      
    </p>
    <p>
      Skips whitespace returning the first non whitespace character. This also sets the EOF flag.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>c</em> - The first char already read from the input stream.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
      <strong>protected char skipWhitespace() throws IOException</strong>      
    </p>
    <p>
      Skips whitespace returning the first non whitespace character. This also sets the EOF flag.      
    </p>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
      <strong>protected char readUntil(String until, char c, StringBuilder sb, boolean handleEscapes) throws IOException</strong>      
    </p>
    <p>
      Reads until any of a specified set of characters occur.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
                
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>until</em> - The characters to stop reading at. The stopping character will be returned unless EOF.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>c</em> - The first preread character.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>sb</em> - If not null read characters are added to this. The stopping character will not be included.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>handleEscapes</em> - True if we are reading a string that should handle escape characters.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
      <strong>protected char readUntil(String until, StringBuilder sb, boolean string) throws IOException</strong>      
    </p>
    <p>
      Reads until any of a specified set of characters occur.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>until</em> - The characters to stop reading at. The stopping character will be returned unless EOF.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>sb</em> - If not null read characters are added to this. The stopping character will not be included.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>string</em> - True if we are rading a string that should be escaped.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
      <strong>protected char readUntil(String until, StringBuilder sb) throws IOException</strong>      
    </p>
    <p>
      Reads until any of a specified set of characters occur.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>until</em> - The characters to stop reading at. The stopping character will be returned unless EOF.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>sb</em> - If not null read characters are added to this. The stopping character will not be included.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
      <strong>protected boolean checkValidChar(char c, String validChars)</strong>      
    </p>
    <p>
      Returns true if c is one of the characters in validChars.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>c</em> - The character to check.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>validChars</em> - The valid characters.         
      </p>
    </blockquote>
    <p>
      <strong>protected void assertChar(char a, char e, String message)</strong>      
    </p>
    <p>
      Asserts that char a equals expected char c.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>a</em> - The char to assert.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>e</em> - The expected value.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>message</em> - Failure message.         
      </p>
    </blockquote>
    <p>
      <strong>protected void assertChar(char a, String expected, String message)</strong>      
    </p>
    <p>
      Asserts that char a equals expected char c.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>a</em> - The char to assert.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>expected</em> - String of valid characters.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>message</em> - Failure message.         
      </p>
    </blockquote>
    <p>
      protected <em>static</em> <em>class</em> <strong>JSONWriter </strong>   [se.natusoft.osgi.aps.json] {      
    </p>
    <p>
      For subclasses to use in writeJSON(JSONWriter writer).      
    </p>
    <p>
            
    </p>
    <p>
      <strong>protected JSONWriter(Writer writer)</strong>      
    </p>
    <p>
      Creates a new JSONWriter instance.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>writer</em> - The writer to write to.         
      </p>
    </blockquote>
    <p>
      <strong>protected void write(String json) throws IOException</strong>      
    </p>
    <p>
      Writes JSON output.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>json</em> - The JSON output to write.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failure.         
      </p>
    </blockquote>
    <p>
      <strong>protected void writeln(String json) throws  IOException</strong>      
    </p>
    <p>
      Writes JSON output plus a newline.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>json</em> - The JSON output to write.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em>        
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>BeanInstance </strong>   [se.natusoft.osgi.aps.json.tools] {      
    </p>
    <p>
      This wraps a Java Bean instance allowing it to be populated with data using <em>setProperty(String</em>,<em> Object)</em> methods handling all reflection calls.      
    </p>
    <p>
            
    </p>
    <p>
      <strong>public BeanInstance(Object modelInstance)</strong>      
    </p>
    <p>
      Creates a new ModelInstance.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>modelInstance</em> - The model instance to wrap.         
      </p>
    </blockquote>
    <p>
      <strong>public Object getModelInstance()</strong>      
    </p>
    <p>
      Returns the test model instance held by this object.      
    </p>
    <p>
      <strong>public List&lt;String&gt; getSettableProperties()</strong>      
    </p>
    <p>
      Returns a list of settable properties.      
    </p>
    <p>
      <strong>public List&lt;String&gt; getGettableProperties()</strong>      
    </p>
    <p>
      Returns a list of gettable properties.      
    </p>
    <p>
      <strong>public void setProperty(String property, Object value) throws JSONConvertionException</strong>      
    </p>
    <p>
      Sets a property      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>property</em> - The name of the property to set.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>value</em> - The value to set with.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - on any failure to set the property.         
      </p>
    </blockquote>
    <p>
      <strong>public Object getProperty(String property) throws JSONConvertionException</strong>      
    </p>
    <p>
      Returns the value of the specified property.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        The property value.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>property</em> - The property to return value of.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - on failure (probably bad property name!).         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
      <strong>public Class getPropertyType(String property) throws JSONConvertionException</strong>      
    </p>
    <p>
      Returns the type of the specified property.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        The class representing the property type.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>property</em> - The property to get the type for.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - if property does not exist.         
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JavaToJSON </strong>   [se.natusoft.osgi.aps.json.tools] {      
    </p>
    <p>
      Takes a JavaBean and produces a JSONObject.      
    </p>
    <p>
      <strong>public static JSONObject convertObject(Object javaBean) throws JSONConvertionException</strong>      
    </p>
    <p>
      Converts a JavaBean object into a <em>JSONObject</em>.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A JSONObject containing all values from the JavaBean.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>javaBean</em> - The JavaBean object to convert.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - on converting failure.         
      </p>
    </blockquote>
    <p>
      <strong>public static JSONObject convertObject(JSONObject jsonObject, Object javaBean) throws JSONConvertionException</strong>      
    </p>
    <p>
      Converts a JavaBean object into a <em>JSONObject</em>.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A JSONObject containing all values from the JavaBean.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>jsonObject</em> - The jsonObject to convert the bean into or null for a new JSONObject.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>javaBean</em> - The JavaBean object to convert.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - on converting failure.         
      </p>
    </blockquote>
    <p>
      <strong>public static JSONValue convertValue(Object value)</strong>      
    </p>
    <p>
      Converts a value from a java value to a <em>JSONValue</em>.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        The converted JSONValue.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>value</em> - The java value to convert. It can be one of String, Number, Boolean, null, JavaBean, or an array of those.         
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONConvertionException </strong> extends  RuntimeException    [se.natusoft.osgi.aps.json.tools] {      
    </p>
    <p>
      This exception is thrown on failure to convert from JSON to Java or Java to JSON.      
    </p>
    <p>
      Almost all exceptions within the APS services and libraries extend either <em>APSException</em> or <em>APSRuntimeException</em>. I decided to just extend RuntimeException here to avoid any other dependencies for this library since it can be useful outside of APS and can be used as any jar if not deployed in OSGi container.      
    </p>
    <p>
      <strong>public JSONConvertionException(final String message)</strong>      
    </p>
    <p>
      Creates a new <em>JSONConvertionException</em>.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The exception message         
      </p>
    </blockquote>
    <p>
      <strong>public JSONConvertionException(final String message, final Throwable cause)</strong>      
    </p>
    <p>
      Creates a new <em>JSONConvertionException</em>.      
    </p>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>message</em> - The exception message         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>cause</em> - The cause of this exception.         
      </p>
    </blockquote>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>JSONToJava </strong>   [se.natusoft.osgi.aps.json.tools] {      
    </p>
    <p>
      Creates a JavaBean instance and copies data from a JSON value to it.      
    </p>
    <p>
      The following mappings are made in addition to the expected ones:      
    </p>
    <ul>
      <li>
        <p>
          <em>JSONArray</em> only maps to an array property.          
        </p>
      </li>
      <li>
        <p>
          Date properties in bean are mapped from <em>JSONString</em> "yyyy-MM-dd HH:mm:ss".          
        </p>
      </li>
      <li>
        <p>
          Enum properties in bean are mapped from <em>JSONString</em> which have to contain enum constant name.          
        </p>
      </li>
    </ul>
    <p>
      <strong>public static &lt;T&gt; T convert(InputStream jsonStream, Class&lt;T&gt; javaClass) throws IOException, JSONConvertionException</strong>      
    </p>
    <p>
      Returns an instance of a java class populated with data from a json object value read from a stream.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A populated instance of javaClass.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>jsonStream</em> - The stream to read from.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>javaClass</em> - The java class to instantiate and populate.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failures.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - On JSON to Java failures.         
      </p>
    </blockquote>
    <p>
      <strong>public static &lt;T&gt; T convert(String json, Class&lt;T&gt; javaClass) throws IOException, JSONConvertionException</strong>      
    </p>
    <p>
      Returns an instance of a java class populated with data from a json object value read from a String containing JSON.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A populated instance of javaClass.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>json</em> - The String to read from.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>javaClass</em> - The java class to instantiate and populate.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>IOException</em> - on IO failures.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - On JSON to Java failures.         
      </p>
    </blockquote>
    <p>
      <strong>public static &lt;T&gt; T convert(JSONValue json, Class&lt;T&gt; javaClass) throws JSONConvertionException</strong>      
    </p>
    <p>
      Returns an instance of java class populated with data from json.      
    </p>
    <p>
      <em>Returns</em>      
    </p>
    <blockquote>
      <p>
        A converted Java object.        
      </p>
    </blockquote>
    <p>
      <em>Parameters</em>      
    </p>
    <blockquote>
      <p>
        <em>json</em> - The json to convert to java.         
      </p>
    </blockquote>
    <blockquote>
      <p>
        <em>javaClass</em> - The class of the java object to convert to.         
      </p>
    </blockquote>
    <p>
      <em>Throws</em>      
    </p>
    <blockquote>
      <p>
        <em>JSONConvertionException</em> - On failure to convert.         
      </p>
    </blockquote>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
    <p>
      public <em>class</em> <strong>SystemOutErrorHandler </strong> implements  JSONErrorHandler    [se.natusoft.osgi.aps.json.tools] {      
    </p>
    <p>
      A simple implementation of <em>JSONErrorHandler</em> that simply displays messages on System.out and throws a <em>RuntimeException</em> on fail. This is used by the tests. In a non test case another implementation is probably preferred.      
    </p>
    <p>
            
    </p>
    <p>
            
    </p>
    <p>
      }      
    </p>
    <hr/>    <p>
                
    </p>
  </body>
</html>
