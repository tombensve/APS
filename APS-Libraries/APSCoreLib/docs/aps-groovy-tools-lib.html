<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="generated-by" content="MarkdownDoc"/>
    <link href="docs.css" type="text/css" rel="stylesheet"/>
  </head>
  <body>
    <H1>MapJsonDocValidator</H1>
    <p>
      This takes a schema (made up of a <code> Map&lt;String,</code><code> Object&gt; </code>, see below) and another <code> Map&lt;String,</code><code> Object&gt; </code> representing the JSON. So the catch here is that you need a JSON parser that allows you to get the content as a Map. The Vertx JSON parser does. This uses <code>Map</code> since it is generic, does not need to hardcode dependency on a specific parser, and maps are very easy to work with in Groovy.      
    </p>
    <H2>Useage</H2>
    <pre>
      <code>
         private Map&lt;String, Object&gt; schema = [
                "meta/header": "meta",
                header_1: [
                        type_1      : "service",
                        "meta/type" : "metadata",
                        address_1   : "?aps\\.admin\\..*",
                        classifier_1: "?public|private"
                ],
                body_1  : [
                        action_1: "get-webs"
                ],
                reply_0: [
                        webs_1: [
                                [
                                        name_1: "?.*",
                                        url_1: "?^https?://.*",
                                        no1_0: "#1-100",
                                        no2_0: "#&lt;=10",
                                        no3_0: "#&gt;100",
                                        no4_0: "#1.2-3.4"
                                ]
                        ]
                ]
        ] as Map&lt;String, Object&gt;
    
        private MapJsonDocValidator verifier = new MapJsonDocValidator( validStructure: schema )
    
        ...
    
        verifier.validate(myJsonMap)
      </code>
    </pre>
    <p>
      This will throw a runtime exception on validation failure.      
    </p>
    <H2>Schema</H2>
    <H3>Keys</H3>
    <p>
      &lt;key&gt;_0 - The key is optional.      
    </p>
    <p>
      &lt;key&gt;_1 - The key is required.      
    </p>
    <H3>Values</H3>
    <H4>"?regexp"</H4>
    <p>
      The '?' indicates that the rest of the value is a regular expression. This regular expression will be applied to each value.      
    </p>
    <H4>"&lt;hash&gt;&lt;range&gt;"</H4>
    <p>
      This indicates that this is a number and defines the number range allowed. The following variants are available:      
    </p>
    <p>
      <strong>"#from-to"</strong> : This specifies a range of allowed values, from lowest to highest.      
    </p>
    <p>
      <strong>"#&lt;=num"</strong> : This specifies that the numeric value must be less than or equal to the specified number.      
    </p>
    <p>
      <strong>"#&gt;=num"</strong> : This specifies that the numeric value must be larger than or equal to the specified number.      
    </p>
    <p>
      <strong>"#&lt;num"</strong> : This specifies that the numeric value must be less than the specified number.      
    </p>
    <p>
      <strong>"#&gt;num"</strong> : This specifies that the numeric value must be larger than the specified number.      
    </p>
    <p>
      Note: Both floating point numbers and integers are allowed.      
    </p>
    <H4>"bla"</H4>
    <p>
      This requires values to be exactly "bla".      
    </p>
    <H3>Example</H3>
    <pre>
      <code>
     Map&lt;String, Object&gt; struct = [
        header_1: [
           type_1      : "service",
           address_1   : "aps.admin.web",
           classifier_0: "?public|private"
        ],
        body_1  : [
           action_1: "get-webs"
        ],
        reply_0: [
           webs_1: [
              [
                 name_1: "?.*",
                 url_0: "?^https?://.*",
                 someNumber_0: "#0-100" // Also valid: ( "&gt;0" "&lt;100" ) ( "&gt;=0" "&lt;=100" )
              ]
           ]
        ]
     ]
      </code>
    </pre>
  </body>
</html>
